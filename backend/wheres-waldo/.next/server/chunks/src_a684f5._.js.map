{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/lib/constants.ts"],"sourcesContent":["export const BOARD_SELECT_SIZE = 40;\n"],"names":[],"mappings":";;;AAAO,MAAM,oBAAoB"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/utils/helper.ts"],"sourcesContent":["import { Coordinates } from \"@/lib/models/Board\";\nimport { GameSessionTimestampSchema } from \"@/lib/models/GameSession\";\nimport clsx, { ClassValue } from \"clsx\";\nimport { differenceInMilliseconds } from \"date-fns\";\nimport { InferSchemaType } from \"mongoose\";\nimport { Context, useContext } from \"react\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function calculateDistance(\n\tpinpoint: Coordinates,\n\tcoordinates: Coordinates,\n) {\n\treturn Math.sqrt(\n\t\tMath.pow(pinpoint.x - coordinates.x, 2) +\n\t\t\tMath.pow(pinpoint.y - coordinates.y, 2),\n\t);\n}\n\nexport function cn(...classValues: ClassValue[]) {\n\treturn twMerge(clsx(...classValues));\n}\n\nexport function getContext<T>(context: Context<T>) {\n\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\tconst contextValue = useContext(context);\n\tif (!contextValue) {\n\t\tthrow new Error(`Component must be used inside ${context}`);\n\t}\n\treturn contextValue;\n}\n\nexport function formatTimer(timer: number) {\n\tlet milliseconds = timer % 1000;\n\tlet seconds = Math.floor(timer / 1000);\n\tlet minutes = Math.floor(seconds / 60);\n\tlet hours = Math.floor(minutes / 60);\n\n\tseconds = seconds % 60;\n\tminutes = minutes % 60;\n\n\tlet result = \"\";\n\tif (hours != 0) result += `${hours} hours and `;\n\n\tif (minutes != 0) result += `${minutes} minutes and `;\n\n\tresult += `${seconds}.`;\n\tresult +=\n\t\tmilliseconds > 0\n\t\t\t? milliseconds > 9\n\t\t\t\t? milliseconds > 99\n\t\t\t\t\t? `${milliseconds}`.slice(0, 3)\n\t\t\t\t\t: `0${milliseconds}`.slice(0, 3)\n\t\t\t\t: `00${milliseconds}`.slice(0, 3)\n\t\t\t: \"000\";\n\n\treturn `${result} seconds`;\n}\n\nexport function getTotalTime(\n\ttimestamps: InferSchemaType<typeof GameSessionTimestampSchema>[],\n) {\n\tlet total_time = timestamps.reduce((total, { time_start, time_paused }) => {\n\t\tif (!time_paused || !time_start) return total;\n\t\treturn total + differenceInMilliseconds(time_paused, time_start);\n\t}, 0);\n\tconst last_timestamp = timestamps[timestamps.length - 1];\n\n\tif (last_timestamp && !last_timestamp.time_paused)\n\t\ttotal_time += differenceInMilliseconds(\n\t\t\tDate.now(),\n\t\t\tlast_timestamp.time_start!,\n\t\t);\n\treturn total_time;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAQO,SAAS,kBACf,QAAqB,EACrB,WAAwB;IAExB,OAAO,KAAK,IAAI,CACf,KAAK,GAAG,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC,EAAE,KACpC,KAAK,GAAG,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC,EAAE;AAExC;AAEO,SAAS,GAAG,GAAG,WAAyB;IAC9C,OAAO,uKAAQ,oJAAQ;AACxB;AAEO,SAAS,WAAc,OAAmB;IAChD,sDAAsD;IACtD,MAAM,eAAe,8NAAW;IAChC,IAAI,CAAC,cAAc;QAClB,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,QAAQ,CAAC;IAC3D;IACA,OAAO;AACR;AAEO,SAAS,YAAY,KAAa;IACxC,IAAI,eAAe,QAAQ;IAC3B,IAAI,UAAU,KAAK,KAAK,CAAC,QAAQ;IACjC,IAAI,UAAU,KAAK,KAAK,CAAC,UAAU;IACnC,IAAI,QAAQ,KAAK,KAAK,CAAC,UAAU;IAEjC,UAAU,UAAU;IACpB,UAAU,UAAU;IAEpB,IAAI,SAAS;IACb,IAAI,SAAS,GAAG,UAAU,CAAC,EAAE,MAAM,WAAW,CAAC;IAE/C,IAAI,WAAW,GAAG,UAAU,CAAC,EAAE,QAAQ,aAAa,CAAC;IAErD,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;IACvB,UACC,eAAe,IACZ,eAAe,IACd,eAAe,KACd,CAAC,EAAE,aAAa,CAAC,CAAC,KAAK,CAAC,GAAG,KAC3B,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,KAAK,CAAC,GAAG,KAC7B,CAAC,EAAE,EAAE,aAAa,CAAC,CAAC,KAAK,CAAC,GAAG,KAC9B;IAEJ,OAAO,CAAC,EAAE,OAAO,QAAQ,CAAC;AAC3B;AAEO,SAAS,aACf,UAAgE;IAEhE,IAAI,aAAa,WAAW,MAAM,CAAC,CAAC,OAAO,EAAE,UAAU,EAAE,WAAW,EAAE;QACrE,IAAI,CAAC,eAAe,CAAC,YAAY,OAAO;QACxC,OAAO,QAAQ,qLAAyB,aAAa;IACtD,GAAG;IACH,MAAM,iBAAiB,UAAU,CAAC,WAAW,MAAM,GAAG,EAAE;IAExD,IAAI,kBAAkB,CAAC,eAAe,WAAW,EAChD,cAAc,qLACb,KAAK,GAAG,IACR,eAAe,UAAU;IAE3B,OAAO;AACR"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/components/GameBoard.tsx"],"sourcesContent":["\"use client\";\n\nimport { pauseGameSession, pinpointCoordinates } from \"@/app/actions\";\nimport { BOARD_SELECT_SIZE } from \"@/lib/constants\";\nimport { BoardItemModel, BoardModel, Coordinates } from \"@/lib/models/Board\";\nimport {\n\tGameSessionModel,\n\tGameSessionTimestampsModel,\n} from \"@/lib/models/GameSession\";\nimport { cn, formatTimer, getContext, getTotalTime } from \"@/utils/helper\";\nimport Image from \"next/image\";\nimport { useRouter } from \"next/router\";\nimport {\n\tDispatch,\n\tMouseEventHandler,\n\tSetStateAction,\n\tcreateContext,\n\tuseEffect,\n\tuseRef,\n\tuseState,\n} from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\ntype ClientBoardItem = Omit<BoardItemModel, \"coordinates\">;\n\nconst BoardContext = createContext<{\n\tcoordinates?: Coordinates | null;\n\tsetCoordinates: Dispatch<SetStateAction<Coordinates | null>>;\n\titems: ClientBoardItem[];\n\tsession: GameSessionModel;\n\tloading: boolean;\n\tsetLoading: Dispatch<SetStateAction<boolean>>;\n} | null>(null);\n\nconst TIMER_INTERVAL = 25;\n\nexport function GameBoard({\n\tboard,\n\tsession,\n}: {\n\tboard: BoardModel;\n\tsession: GameSessionModel;\n}) {\n\tconst [clickCoordinates, setCoordinates] = useState<Coordinates | null>(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst boardRef = useRef<HTMLDivElement | null>(null);\n\n\tconst getCoordinates: MouseEventHandler<HTMLImageElement> =\n\t\tfunction getCoordinates(event) {\n\t\t\tconst { top, left } = event.currentTarget.getBoundingClientRect();\n\t\t\tconst { clientX, clientY } = event;\n\t\t\tsetCoordinates({ x: clientX - left, y: clientY - top });\n\t\t};\n\n\tuseEffect(() => {\n\t\tfunction outsideBoardClickHandler(e: globalThis.MouseEvent) {\n\t\t\tif ((e.target as HTMLDivElement).closest(\"#boardContainer\") === null) {\n\t\t\t\tsetCoordinates(null);\n\t\t\t}\n\t\t}\n\t\tfunction pauseGame() {\n\t\t\tpauseGameSession(session._id);\n\t\t}\n\t\twindow.addEventListener(\"click\", outsideBoardClickHandler);\n\n\t\tif (!session.time_finished)\n\t\t\twindow.addEventListener(\"beforeunload\", pauseGame);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"click\", outsideBoardClickHandler);\n\t\t\twindow.removeEventListener(\"beforeunload\", pauseGame);\n\t\t};\n\t}, [session.time_finished, session]);\n\n\treturn (\n\t\t<div className=\"flex w-screen flex-col gap-2 overflow-hidden pb-2 pt-4\">\n\t\t\t<div className=\"px-4\">\n\t\t\t\t<GameBoardTimer\n\t\t\t\t\ttimeFinished={session.time_finished}\n\t\t\t\t\ttimestamps={session.timestamps}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"max-w-screen flex items-center justify-center overflow-scroll text-slate-100\",\n\t\t\t\t\t{ \"cursor-pointer\": !session.time_finished },\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<BoardContext.Provider\n\t\t\t\t\tvalue={{\n\t\t\t\t\t\tcoordinates: clickCoordinates,\n\t\t\t\t\t\titems: board.items,\n\t\t\t\t\t\tsession,\n\t\t\t\t\t\tloading,\n\t\t\t\t\t\tsetLoading,\n\t\t\t\t\t\tsetCoordinates,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={boardRef}\n\t\t\t\t\t\tid=\"boardContainer\"\n\t\t\t\t\t\tclassName=\"relative\"\n\t\t\t\t\t\tonClick={getCoordinates}\n\t\t\t\t\t>\n\t\t\t\t\t\t{board.items.map(\n\t\t\t\t\t\t\t(item, index) =>\n\t\t\t\t\t\t\t\titem.pinpoint &&\n\t\t\t\t\t\t\t\titem.found && <BoardItemFoundPin item={item} key={index} />,\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!session.time_finished && <BoardDropdown />}\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\tsrc={board.image}\n\t\t\t\t\t\t\talt={board.desc}\n\t\t\t\t\t\t\tclassName=\"max-w-none rounded-sm shadow-lg shadow-slate-900/50\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: `${board.height}px`,\n\t\t\t\t\t\t\t\twidth: `${board.width}px`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\twidth={board.height}\n\t\t\t\t\t\t\theight={board.width}\n\t\t\t\t\t\t\tquality={100}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</BoardContext.Provider>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\nexport function GameBoardTimer({\n\ttimeFinished,\n\ttimestamps,\n}: {\n\ttimeFinished?: number | null;\n\ttimestamps: GameSessionTimestampsModel[];\n}) {\n\tconst [timer, setTimer] = useState<number | null>(null);\n\n\tuseEffect(() => {\n\t\tlet interval: NodeJS.Timeout;\n\t\tconsole.log(timestamps);\n\t\tconst total_time = getTotalTime(timestamps);\n\t\tsetTimer(total_time);\n\t\tinterval = setInterval(() => {\n\t\t\tif (!timeFinished) {\n\t\t\t\tconst total_time = getTotalTime(timestamps);\n\t\t\t\tsetTimer((prev) => (prev || total_time) + TIMER_INTERVAL);\n\t\t\t} else {\n\t\t\t\tsetTimer(timeFinished);\n\t\t\t\tclearInterval(interval);\n\t\t\t}\n\t\t}, TIMER_INTERVAL);\n\n\t\treturn () => {\n\t\t\tif (interval) clearInterval(interval);\n\t\t};\n\t}, [timeFinished, timestamps]);\n\n\treturn (\n\t\t<div className=\"w-fit rounded-md bg-slate-200 px-4 py-2 text-slate-700\">\n\t\t\t{timer ? formatTimer(timer) : \"...\"}\n\t\t</div>\n\t);\n}\n\nexport function BoardItemFoundPin({ item }: { item: ClientBoardItem }) {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"absolute flex items-center justify-center rounded-full bg-green-400/70\"\n\t\t\tstyle={{\n\t\t\t\ttop: `${item.pinpoint!.y - 12}px`,\n\t\t\t\tleft: `${item.pinpoint!.x - 12}px`,\n\t\t\t}}\n\t\t>\n\t\t\t<svg\n\t\t\t\tclassName=\"h-6 w-6 text-white\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M9 16.17L4.83 12l-1.42 1.41L9 19L21 7l-1.41-1.41z\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t></path>\n\t\t\t</svg>\n\t\t</div>\n\t);\n}\n\nexport function BoardDropdown() {\n\tlet { coordinates: boardCoordinates, setCoordinates } =\n\t\tgetContext(BoardContext);\n\n\tconst is_valid = boardCoordinates !== null;\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"absolute flex items-start gap-2\"\n\t\t\tstyle={{\n\t\t\t\tpointerEvents: \"auto\",\n\t\t\t\topacity: `${is_valid ? \"1\" : \"0\"}`,\n\t\t\t\ttop: is_valid ? `${boardCoordinates!.y - BOARD_SELECT_SIZE / 2}px` : \"\",\n\t\t\t\tleft: is_valid\n\t\t\t\t\t? `${boardCoordinates!.x - BOARD_SELECT_SIZE / 2}px`\n\t\t\t\t\t: \"\",\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"cursor-pointer rounded-full border-4 border-slate-50 ring ring-offset-2 ring-offset-slate-600\"\n\t\t\t\tonClick={function (event) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tsetCoordinates(null);\n\t\t\t\t}}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: `${BOARD_SELECT_SIZE}px`,\n\t\t\t\t\theight: `${BOARD_SELECT_SIZE}px`,\n\t\t\t\t}}\n\t\t\t></div>\n\t\t\t<DropdownSelectList />\n\t\t</div>\n\t);\n}\n\nexport function DropdownSelectList() {\n\tconst { items } = getContext(BoardContext);\n\treturn (\n\t\t<div\n\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\tclassName=\"flex cursor-default select-none flex-col overflow-clip rounded-md bg-slate-600 text-center font-bold text-slate-50 shadow-lg\"\n\t\t>\n\t\t\t<div className=\"px-2 py-1 text-left text-xs italic\">Select:</div>\n\t\t\t{items.map((item, index) => (\n\t\t\t\t<DropdownSelectItem item={item} key={index} />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport function DropdownSelectItem({ item }: { item: ClientBoardItem }) {\n\tconst { coordinates, setCoordinates, session, loading, setLoading } =\n\t\tgetContext(BoardContext);\n\tconst selectItem: MouseEventHandler<HTMLDivElement> =\n\t\tasync function selectItem(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tif (!coordinates) return;\n\t\t\tsetLoading(true);\n\t\t\tsetCoordinates(null);\n\n\t\t\tconst toast_options = { autoClose: 2000 };\n\n\t\t\tconst { found, message } = await pinpointCoordinates(\n\t\t\t\tsession._id,\n\t\t\t\titem._id!.toString(),\n\t\t\t\tcoordinates,\n\t\t\t);\n\t\t\tif (!found) toast.error(message, toast_options);\n\t\t\tif (found) toast.success(message, toast_options);\n\n\t\t\tsetLoading(false);\n\t\t};\n\treturn (\n\t\t<div\n\t\t\tonClick={selectItem}\n\t\t\tclassName={cn(\"flex min-w-40 items-center px-4 py-1 \", {\n\t\t\t\t\"pointer-events-none bg-green-600\": item.found,\n\t\t\t\t\"pointer-events-none\": item.found || session.time_finished || loading,\n\t\t\t\t\"cursor-pointer hover:bg-slate-500/50\": !item.found,\n\t\t\t})}\n\t\t>\n\t\t\t<Image\n\t\t\t\tsrc={item.image}\n\t\t\t\twidth={50}\n\t\t\t\theight={50}\n\t\t\t\talt={item.name}\n\t\t\t\tclassName=\"h-10 w-10 rounded-full border-2 border-white text-xs\"\n\t\t\t/>\n\t\t\t<div className=\"flex-grow\">{item.name}</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/components/Leaderboard.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { BoardModel } from \"./MenuBoard\";\nimport { formatTimer, getContext } from \"@/utils/helper\";\nimport { LeaderboardContext } from \"./Header\";\nimport { LeaderboardItem, getAllLeaderboards } from \"@/app/actions\";\n\nexport function Leaderboard({ board }: { board: BoardModel }) {\n\tconst { setShowLeaderBoard } = getContext(LeaderboardContext);\n\tconst [page, setPage] = useState(1);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [scores, setScores] = useState<LeaderboardItem[] | null>(null);\n\tconst [loading, setLoading] = useState(true);\n\n\tasync function getLeaderboard() {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tconst { scores: fetchScores, message } = await getAllLeaderboards(\n\t\t\t\tboard._id.toString(),\n\t\t\t\tpage,\n\t\t\t);\n\n\t\t\tsetLoading(false);\n\t\t\tif (!fetchScores) setError(message);\n\t\t\telse setScores(fetchScores);\n\t\t} catch (error) {}\n\t}\n\n\tuseEffect(() => {\n\t\tgetLeaderboard();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"fixed left-0 top-0 z-50 flex h-screen w-screen items-center justify-center bg-slate-900/70\">\n\t\t\t<div className=\"relative flex flex-col gap-4 rounded-md bg-slate-700 p-4 shadow-md lg:w-[700px]\">\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tclassName=\"absolute right-3 top-2 h-7 w-7 cursor-pointer rounded-xl p-[2px] text-xl font-bold text-red-300\n\t\t\t\t\t\ttransition-all hover:scale-110 hover:rounded-md hover:bg-slate-500\"\n\t\t\t\t\tonClick={() => setShowLeaderBoard(false)}\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t></path>\n\t\t\t\t</svg>\n\t\t\t\t<div className=\"text-center text-xl font-bold\">\n\t\t\t\t\t<h1 className=\"flex-grow\">{board.name}&apos;s Leaderboard</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"px-4 text-center\">\n\t\t\t\t\t<LeaderboardScoreList\n\t\t\t\t\t\tscores={scores}\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\terror={error}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function LeaderboardScoreList({\n\tscores,\n\tloading,\n\terror,\n}: {\n\tscores: LeaderboardItem[] | null;\n\tloading: boolean;\n\terror: string | null;\n}) {\n\tif (loading)\n\t\treturn (\n\t\t\t<div className=\"animate-pulse text-center text-xl font-bold italic text-slate-500\">\n\t\t\t\tLoading scores...\n\t\t\t</div>\n\t\t);\n\n\tif (error) return <div className=\"text-slate-600\">{error}</div>;\n\tif (!scores) return <div>Unable to find scores for this game.</div>;\n\tif (scores.length === 0)\n\t\treturn (\n\t\t\t<div className=\"text-slate-400\">\n\t\t\t\tThere is currently no scores submitted for this game yet.\n\t\t\t</div>\n\t\t);\n\n\treturn (\n\t\t<div className=\"lg:h-[700px]\">\n\t\t\t<div className=\"relative grid grid-cols-[auto_300px] overflow-scroll\">\n\t\t\t\t<div className=\"sticky top-0 rounded-tl-md border-r border-r-slate-400 bg-slate-500 px-6 text-lg font-bold\">\n\t\t\t\t\tUser\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sticky top-0 rounded-tr-md bg-slate-500 px-6 text-lg font-bold\">\n\t\t\t\t\tTimer\n\t\t\t\t</div>\n\t\t\t\t{scores.map(({ name, time_finished }) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"border-r border-r-slate-400 bg-slate-500 px-2 text-left [&:nth-child(4n+3)]:bg-slate-600 [&:nth-last-child(2)]:rounded-bl-md\">\n\t\t\t\t\t\t\t{name || \"Guest\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-center justify-center bg-slate-500 px-2  text-sm last:rounded-br-md [&:nth-child(4n+4)]:bg-slate-600\">\n\t\t\t\t\t\t\t{formatTimer(time_finished)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;AAOO,SAAS,YAAY,EAAE,KAAK,EAAyB;IAC3D,MAAM,EAAE,kBAAkB,EAAE,GAAG;IAC/B,MAAM,CAAC,MAAM,QAAQ,GAAG,4NAAS;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,4NAAwB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,4NAAmC;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,4NAAS;IAEvC,eAAe;QACd,WAAW;QACX,IAAI;YACH,MAAM,EAAE,QAAQ,WAAW,EAAE,OAAO,EAAE,GAAG,MAAM,4IAC9C,MAAM,GAAG,CAAC,QAAQ,IAClB;YAGD,WAAW;YACX,IAAI,CAAC,aAAa,SAAS;iBACtB,UAAU;QAChB,EAAE,OAAO,OAAO,CAAC;IAClB;IAEA,6NAAU;QACT;IACD,GAAG,EAAE;IAEL,qBACC,mPAAC;QAAI,WAAU;kBACd,cAAA,mPAAC;YAAI,WAAU;;8BACd,mPAAC;oBACA,OAAM;oBACN,YAAW;oBACX,SAAQ;oBACR,WAAU;oBAEV,SAAS,IAAM,mBAAmB;8BAElC,cAAA,mPAAC;wBACA,GAAE;wBACF,MAAK;;;;;;;;;;;8BAGP,mPAAC;oBAAI,WAAU;8BACd,cAAA,mPAAC;wBAAG,WAAU;;4BAAa,MAAM,IAAI;4BAAC;;;;;;;;;;;;8BAEvC,mPAAC;oBAAI,WAAU;8BACd,cAAA,mPAAC;wBACA,QAAQ;wBACR,SAAS;wBACT,OAAO;;;;;;;;;;;;;;;;;;;;;;AAMb;AAEO,SAAS,qBAAqB,EACpC,MAAM,EACN,OAAO,EACP,KAAK,EAKL;IACA,IAAI,SACH,qBACC,mPAAC;QAAI,WAAU;kBAAoE;;;;;;IAKrF,IAAI,OAAO,qBAAO,mPAAC;QAAI,WAAU;kBAAkB;;;;;;IACnD,IAAI,CAAC,QAAQ,qBAAO,mPAAC;kBAAI;;;;;;IACzB,IAAI,OAAO,MAAM,KAAK,GACrB,qBACC,mPAAC;QAAI,WAAU;kBAAiB;;;;;;IAKlC,qBACC,mPAAC;QAAI,WAAU;kBACd,cAAA,mPAAC;YAAI,WAAU;;8BACd,mPAAC;oBAAI,WAAU;8BAA6F;;;;;;8BAG5G,mPAAC;oBAAI,WAAU;8BAAiE;;;;;;gBAG/E,OAAO,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,aAAa,EAAE,iBACnC;;0CACC,mPAAC;gCAAI,WAAU;0CACb,QAAQ;;;;;;0CAEV,mPAAC;gCAAI,WAAU;0CACb,sIAAY;;;;;;;;;;;;;;;;;;;AAOpB"}},
    {"offset": {"line": 612, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 617, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/components/Header.tsx"],"sourcesContent":["\"use client\";\nimport Link from \"next/link\";\nimport { BoardModel } from \"./GameBoard\";\nimport { Leaderboard } from \"./Leaderboard\";\nimport { MouseEventHandler, createContext, useState } from \"react\";\n\nexport const LeaderboardContext = createContext<{\n\tshowLeaderBoard: boolean;\n\tsetShowLeaderBoard: React.Dispatch<React.SetStateAction<boolean>>;\n} | null>(null);\nexport function Header({ board }: { board?: BoardModel }) {\n\tconst [showLeaderBoard, setShowLeaderBoard] = useState(false);\n\tconst getLeaderBoard: MouseEventHandler = function getLeaderBoard() {\n\t\tif (!board) return;\n\t\tsetShowLeaderBoard(true);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<nav className=\"bg-slate-800/70 flex justify-between items-center\">\n\t\t\t\t<Link\n\t\t\t\t\thref=\"/\"\n\t\t\t\t\tclassName=\"px-6 py-4 rounded-md shadow-md font-bold hover:scale-105 transition-all\"\n\t\t\t\t>\n\t\t\t\t\tWhere&apos;s Waldo\n\t\t\t\t</Link>\n\t\t\t\t{board && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"font-bold text-xl\">{board.name}</div>\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 px-4 py-2 select-none hover:scale-105 transition-all cursor-pointer\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 fill-slate-50\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<g fill=\"none\">\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\td=\"M15.254 2a2.25 2.25 0 0 1 2.236 2h1.268a1.75 1.75 0 0 1 1.744 1.606l.006.144v3a3.25 3.25 0 0 1-3.066 3.245l-.21.006a5.758 5.758 0 0 1-4.731 3.95V17.5h1.753a3.25 3.25 0 0 1 3.244 3.066l.006.184v.5a.75.75 0 0 1-.649.743l-.101.007H6.75a.75.75 0 0 1-.744-.648l-.006-.102v-.5a3.25 3.25 0 0 1 3.065-3.245l.185-.005H11v-1.549a5.758 5.758 0 0 1-4.729-3.95L6.246 12a3.25 3.25 0 0 1-3.25-3.25v-3c0-.966.784-1.75 1.75-1.75h1.268a2.25 2.25 0 0 1 2.237-2h7.003zm3.504 3.5h-1.254v4.983A1.75 1.75 0 0 0 19 8.904l.007-.154v-3a.25.25 0 0 0-.193-.243l-.057-.007zM6 5.5H4.746a.25.25 0 0 0-.25.25v3a1.75 1.75 0 0 0 1.505 1.733V5.5z\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<div onClick={getLeaderBoard}>Leaderboards</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</nav>\n\t\t\t{board && showLeaderBoard && (\n\t\t\t\t<LeaderboardContext.Provider\n\t\t\t\t\tvalue={{ showLeaderBoard, setShowLeaderBoard }}\n\t\t\t\t>\n\t\t\t\t\t<Leaderboard board={board} />\n\t\t\t\t</LeaderboardContext.Provider>\n\t\t\t)}\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;;;;;AAMO,MAAM,mCAAqB,iOAGxB;AACH,SAAS,OAAO,EAAE,KAAK,EAA0B;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,4NAAS;IACvD,MAAM,iBAAoC,SAAS;QAClD,IAAI,CAAC,OAAO;QACZ,mBAAmB;IACpB;IAEA,qBACC;;0BACC,mPAAC;gBAAI,WAAU;;kCACd;wBACC,MAAK;wBACL,WAAU;kCACV;;;;;;oBAGA,uBACA;;0CACC,mPAAC;gCAAI,WAAU;0CAAqB,MAAM,IAAI;;;;;;0CAC9C,mPAAC;gCAAI,WAAU;;kDACd,mPAAC;wCACA,OAAM;wCACN,YAAW;wCACX,SAAQ;wCACR,WAAU;kDAEV,cAAA,mPAAC;4CAAE,MAAK;sDACP,cAAA,mPAAC;gDACA,GAAE;gDACF,MAAK;;;;;;;;;;;;;;;;kDAIR,mPAAC;wCAAI,SAAS;kDAAgB;;;;;;;;;;;;;;;;;;;;YAKjC,SAAS,iCACT,mPAAC,mBAAmB,QAAQ;gBAC3B,OAAO;oBAAE;oBAAiB;gBAAmB;0BAE7C,cAAA;oBAAa,OAAO;;;;;;;;;;;;;AAKzB"}},
    {"offset": {"line": 732, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}